<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>AJAX</title>
</head>

<body>
	<h1>AJAX</h1>
	<p>
		AJAXëŠ” Asynchronous JavaScript and XMLì˜ ì•½ìë¡œ,
		ë§ ê·¸ëŒ€ë¡œ JavaScriptì™€ XMLì„ ì´ìš©í•œ ë¹„ë™ê¸°ì  ì •ë³´ êµí™˜ ê¸°ë²•(ë°ì´í„° í†µì‹ )ì´ë‹¤.
	</p>
	<button id="bt1">í´ë¦­!</button>
	<button id="bt2">í´ë¦­!</button>
	<button id="bt3">í´ë¦­!</button>
	<script>
		// thenìœ¼ë¡œ ë‚´ìš© ë°›ê³ , thenìœ¼ë¡œ ë°›ì•„ì˜¤ëŠ” ë¡œì§ì´ ë¶ˆí¸í•˜ë‹¤ë©´, asyncë¡œ ì‚¬ìš© ğŸ™†ğŸ»â€â™€ï¸
		document.querySelector("#bt3").onclick = async function (evt){
			let response = await fetch('/api/dest', {method:'get'});
			// let txt = await response.text();
			// console.log(txt)
			let obj = await response.json();	// ì‘ë‹µì˜ ê²°ê³¼ë¥¼ jsonìœ¼ë¡œ ë°›ìœ¼ë©´
			console.log(obj, typeof obj);	// ê°ì²´ë¡œ ë°˜í™˜
		};
		
		// xhr ëŒ€ì‹  fetch ğŸ™†ğŸ»â€â™€ï¸
		document.querySelector("#bt2").onclick = (evt)=>{
			// fetch ğŸ‘‰ ìš”ì²­ methodë¥¼ ë‹¤ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤
			fetch('/api/dest', {method : 'get'})
			.then(res => {	// ìš”ì²­ ë°›ì•„ì™€ì„œ
				// console.log(res);
				return resp.text();
			})
			.then(result => {	// ì¶œë ¥
				console.log(result)
			})
			.catch(err => {
				conosle.log(err)
			})
		};

		// êµ¬ë²„ì „ìœ¼ë¡œ xml ì‚¬ìš© ğŸ™…ğŸ»â€â™€ï¸
		document.querySelector("#bt1").onclick = (evt) => {
			let xhr = new XMLHttpRequest();
			xhr.open("get", "/api/dest");
			xhr.onload = function (req, evt) {
				console.log("load ", req.target.response);
			}
			xhr.onerror = function (req, evt) {
				console.log("error ", req);
			}
			xhr.send();
			console.log("send ì™„ë£Œ");
		};

	</script>
</body>

</html>